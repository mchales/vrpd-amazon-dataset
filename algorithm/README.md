# Algorithm Instructions

## Description
The algorithm section includes an analysis of the Amazon Dataset (analysis.ipynb), a very naive algorithm for route creation with drone (initial_algorithm.ipynb), the main algorithm for route creation (main_algorithm.ipynb), and a file to analyze the times of creates sequences (time_analysis.ipynb). The helper.ipynb file is to generate a vehicle only events and paths.

For our visual, we need the timesteps of every action by the vehicle and drone. Thus even if we have an existing route path, we must still need to create the events accompanying the path.

For a given route, the drone and vehicle have their own events and path.

### Events and Path
The path is a series of stops with timestops and location. The structure is the same for drones and vehicles.
```json
[
        "id": 1,
        "stop": "UX",
        "coordinates": {
            "lat": 47.937344,
            "lng": -122.244952
        }
    },
    {
        "id": 2,
        "stop": "GC",
        "coordinates": {
            "lat": 47.675824,
            "lng": -122.308083
        }
    }, ... ]
```
This is a sample of the events. The drone events are same in structure to vehcile events, except it may have different event_type.
```json
[
    {
        "id": 1,
        "event_type": "DEPART",
        "stop_id": "UX",
        "time": 0,
        "coordinates": {
            "lat": 47.937344,
            "lng": -122.244952
        }
    }, ...
]
```

This JSON element represents an event where a transport entity departs from stop UX at the very start of tracking (`time: 0`). The geographical position of the stop is given by the latitude and longitude coordinates, which place it at approximately 47.937344, -122.244952.


### Generated Sequences
proposed_sequences.json are proposed vehicle only route sequences generated by solution of the 3rd place finisher of the Last Mile Routing Research Challenge - https://github.com/rasitabay/lastmile_challenge/tree/main. This repository contains instructions on how to generate proposed routes (we used a linux enviroment). We saved 100 generated sequences to proposed_sequences.json, so this step is not necessary.

## Installation
Ensure that you have the Amazon dataset downloaded and is within the algorithm directory. Clone this repository and install necessary packages

```
pip install pandas plotly geopy numpy
```

### Execution
Running this code should be simple as we only have Jupyter Notebooks. Cells must be run sequentially, and ensure each cell's output matches the exisiting output.


